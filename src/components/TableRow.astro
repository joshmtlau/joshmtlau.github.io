---
import TableRowMobile from "./TableRowMobile.astro";
import TableRowDesktop from "./TableRowDesktop.astro";

export interface Props {
  href: string;
  leftLabel?: string;
  leftSubtitle?: string;
  rightTitle: string;
  rightSubtitle?: string;
  image?: string;
  imageAlt?: string;
}

const {
  href,
  leftLabel,
  leftSubtitle,
  rightTitle,
  rightSubtitle,
  image,
  imageAlt,
} = Astro.props;

// Check if link is external
const isExternal = href.startsWith("http://") || href.startsWith("https://");

// Split title into words for proper wrapping with icon
const titleWords = rightTitle.split(" ");
const titleWithoutLastWord = titleWords.slice(0, -1).join(" ");
const lastWord = titleWords[titleWords.length - 1] || rightTitle;
---

<tr 
  class="align-top cursor-pointer group"
  onclick={`window.location.href='${href}'`}
>
    <TableRowMobile
      leftLabel={leftLabel}
      leftSubtitle={leftSubtitle}
      rightTitle={rightTitle}
      rightSubtitle={rightSubtitle}
      image={image}
      imageAlt={imageAlt}
      isExternal={isExternal}
      titleWithoutLastWord={titleWithoutLastWord}
      lastWord={lastWord}
    />

    <TableRowDesktop
      leftLabel={leftLabel}
      leftSubtitle={leftSubtitle}
      rightTitle={rightTitle}
      rightSubtitle={rightSubtitle}
      image={image}
      imageAlt={imageAlt}
      isExternal={isExternal}
      titleWithoutLastWord={titleWithoutLastWord}
      lastWord={lastWord}
    />
</tr>

